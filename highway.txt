#################### Settings ======================
#debug.config

OBERVERS_CYCLE 100
PROTOCOL_CYCLE 20
CONTROL_CYCLE 50

network.size 0
#random.seed 1234567890
random.seed 22222222748

simulation.endtime 50000
simulation.logtime 100


################### initialization ======================

init.0 example.update.initialisation.EnergyInitializer
init.0.protocol energy

init.3 example.update.initialisation.BandwidthInitializer
init.3.protocol bandwidth
init.3.max_bandwidth 1000

init.4 example.update.initialisation.RangeInitializer
init.4.protocol range
init.4.gaussian_mean 150

init.5 example.update.initialisation.StorageInitializer
init.5.protocol disk_space
init.5.gaussian_mean 8000

################### protocols ===========================

########## constraints ======================

protocol.link IdleProtocol

protocol.energy example.update.strategies.Energy

protocol.disk_space example.update.strategies.Storage

protocol.bandwidth example.update.constraints.Bandwidth

protocol.coordinates example.update.constraints.NodeCoordinates

protocol.range example.update.constraints.NetworkRange


########## logic protocols ======================

protocol.neighbor example.update.DiscoveryNeighborhoodMaintainer
protocol.neighbor.coord_protocol coordinates
protocol.neighbor.range_protocol range
protocol.neighbor.energy_protocol energy
protocol.neighbor.transport tr
protocol.neighbor.step PROTOCOL_CYCLE

protocol.gossip example.update.Gossiper
protocol.gossip.neighbors_protocol neighbor
protocol.gossip.supervisor_protocol supervisor
protocol.gossip.transport tr

protocol.tr UniformRandomTransport
protocol.tr.mindelay 0
protocol.tr.maxdelay 1

protocol.supervisor example.update.NaiveScheduler
protocol.supervisor.networking_protocol p2p_net_agent
protocol.supervisor.gossip_protocol gossip
protocol.supervisor.bandwidth_protocol bandwidth
protocol.supervisor.disk_space_protocol disk_space
#protocol.supervisor.transport tr
protocol.supervisor.step PROTOCOL_CYCLE

protocol.p2p_net_agent example.update.NetworkAgent
protocol.p2p_net_agent.neighborhood_protocol neighbor
protocol.p2p_net_agent.bandwidth_protocol bandwidth
protocol.p2p_net_agent.energy_protocol energy
protocol.p2p_net_agent.piece_size 50
protocol.p2p_net_agent.transport tr
protocol.p2p_net_agent.step PROTOCOL_CYCLE

################ Schedulers ==============================

init.sch1 CDScheduler
init.sch1.protocol neighbor supervisor p2p_net_agent

################ controls ==============================

control.inserter example.update.control.GossipInsert
control.inserter.gossip_protocol gossip
control.inserter.network_protocol p2p_net_agent
control.inserter.filename dataset_debian/source.csv
control.inserter.step 500

control.batteryDrainer example.update.control.BatteryDecreaser
control.batteryDrainer.energy_protocol energy
control.batteryDrainer.step 200

control.mover example.update.control.DatasetNodeMover
control.mover.coord_protocol coordinates
control.mover.data_file highway_101_fixed.csv
control.mover.step 100

#######initalizers

control.mover.init.0 example.update.initialisation.EnergyInitializer
control.mover.init.0.protocol energy

control.mover.init.3 example.update.initialisation.BandwidthInitializer
control.mover.init.3.protocol bandwidth
control.mover.init.3.max_bandwidth 1000

control.mover.init.4 example.update.initialisation.RangeInitializer
control.mover.init.4.protocol range
control.mover.init.4.gaussian_mean 500

control.mover.init.5 example.update.initialisation.StorageInitializer
control.mover.init.5.protocol disk_space
control.mover.init.5.gaussian_mean 8000

control.mover.init.1 peersim.edsim.CDScheduler
control.mover.init.1.protocol neighbor supervisor p2p_net_agent


################ Observers ==============================


control.dlProgress example.update.observation.DisseminationObserver
control.dlProgress.transfer_protocol p2p_net_agent
control.dlProgress.sched_protocol supervisor
control.dlProgress.jobs_total_count 30
control.dlProgress.step OBERVERS_CYCLE

control.neighobserver example.update.observation.NeighborsObservers
control.neighobserver.neigbors_protocol neighbor
control.neighobserver.step OBERVERS_CYCLE

control.energyObs example.update.observation.SimpleEnergyObserver
control.energyObs.energy_protocol energy
control.energyObs.step OBERVERS_CYCLE

control.StorageObs example.update.observation.StorageObserver
control.StorageObs.protocol disk_space
control.StorageObs.step OBERVERS_CYCLE

control.coordObs example.update.observation.InetObserver
control.coordObs.coord_protocol coordinates
control.coordObs.step OBERVERS_CYCLE

control.messageObs example.update.observation.MessageObserver
control.messageObs.protocol p2p_net_agent
control.messageObs.step OBERVERS_CYCLE

control.dataObs example.update.observation.SentDataObserver
control.dataObs.protocol p2p_net_agent
control.dataObs.step OBERVERS_CYCLE

################ Order & timings ==============================

order.protocol link,tr,energy,neighbor,gossip,supervisor,p2p_net_agent
order.control neighobserver,dlProgress,energyObs,StorageObs,coordObs,mover


# Observers should be run once more at the end
control.neighobserver.FINAL true

# Observers should not run at first cycle (protocols have not been run yet)

control.dlProgress.from 2
